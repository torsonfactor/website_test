{% extends 'mainapp/output/output.html' %}

{% block title %}
    At News (Welcome to the Scott Wattsom)
{% endblock %}

{% block content %}
    {% if products or discounted_products %}
        <div id="background_for_sidebar">
            <form action="{% url 'filter_for_man' %}" method="get">
                <div class="dropdown" id="dropdown_user_form">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                        Бренды
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" id="dropdownMenuDict" >
                        {% for brand in brands_all %}
                            <li id="dropdownMenuList">
                                <div>
                                    <input class="form-check-input" type="checkbox" value="{{brand.slug}}" id="brand{{brand.id}}" name="brand">
                                </div>
                                <div class="ms-1 w-100">
                                    <label class="form-check-label w-100" for="brand{{brand.id}}">
                                        {{ brand.name }}
                                    </label>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                        Категории
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" id="dropdownMenuDict">
                        {% for category in category_all %}
                            <li id="dropdownMenuList">
                                <div>
                                    <input class="form-check-input" type="checkbox" value="{{category.slug}}" id="category{{category.id}}" name="category">
                                </div>
                                <div class="ms-1 w-100">
                                    <label class="form-check-label w-100" for="category{{category.id}}">
                                        {{ category.name }}
                                    </label>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                    <button class="btn btn-outline-success" type="submit">Найти</button>
                </div>
            </form>
            <div class="row" id="row_sidebar">
                {% if products %}
                    {% for product in products %}
                    <div class="col-md-3" onclick="location.href='{{product.get_absolute_url}}';" onmouseover="WishList('WishList{{product.id}}','size_block{{product.id}}')" onmouseout="WishListBack('WishList{{product.id}}','size_block{{product.id}}')">
                        <div class="content_hide">
                            <div class="product">
                                <div class="image">
                                    <!-- В избранное было тут -->
                                    {% if request.user.is_authenticated %}
                                        {% if product in wishlist %}
                                            <a class="WishList_Source" id="{{product.slug}}" href="{% url 'remove_from_wishlist' ct_model=product.ct_model product_slug=product.slug %}" style="color: black;">
                                                <svg id="WishList" class="WishList{{product.id}}" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 18 18" style="position: absolute; right: 1.6rem; top: 1.6rem;">
                                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                                </svg>
                                            </a>
                                        {% else %}
                                            <a class="WishList_Source" id="{{product.slug}}" href="{% url 'add_to_wishlist' ct_model=product.ct_model product_slug=product.slug %}" style="color: black;">
                                                <svg id="WishList" class="WishList{{product.id}}" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 18 18" style="position: absolute; right: 1.6rem; top: 1.6rem;">
                                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                                </svg>
                                            </a>
                                        {% endif %}
                                    {% endif %}
                                    <!-- В избранное было тут -->
                                    <!--<h7 id="WishList" class="WishList{{product.id}}" style="position: absolute; width: 100%;">Добавить в Избранное</h7>-->
                                    <img class="image_product" id="image_product_sidebar" src="{{product.photo.url}}">
                                </div>
                            </div>
                            <div class="info">
                                <div id="size_block" class="size_block{{product.id}}">
                                    {% if product.stock %}
                                        {% for size in product.size.all %}
                                            <div id="size_class" class="col-md" style="text-align: center;">
                                                <a id="link_size" href="{% url 'add-to-cart' ct_model=product.ct_model product_slug=product.slug product_size=size.slug %}">
                                                    <p style="height: 100%;">{{ size }}</p>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    {% else %}
                                        <div class="col-md" style="text-align: center;">
                                            <a>
                                                Нету в наличии
                                            </a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h1>{{product.title}}</h1>
                            <p style="max-width: 100%;; text-align: center;">{{product.sex}} - {{product.category}}</p>
                            <p style="max-width: 100%;; text-align: center;">{{product.brand}} {{product.title}}</p>
                            <p>{{product.price}} руб.</p>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
                {% if discounted_products %}
                    {% for product in discounted_products %}
                    <div class="col-md-3" onclick="location.href='{{product.get_absolute_url}}';" onmouseover="WishListDiscounted('WishList{{product.id}}','size_block{{product.id}}')" onmouseout="WishListBackDiscounted('WishList{{product.id}}','size_block{{product.id}}')">
                        <div class="content_hide">
                            <div class="product">
                                <div class="image">
                                    {% if request.user.is_authenticated %}
                                        {% if product in wishlist %}
                                            <a class="WishList_Source" href="{% url 'remove_from_wishlist' ct_model=product.ct_model product_slug=product.slug %}" style="color: black;">
                                                <svg id="WishList" class="WishList{{product.id}}" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 18 18" style="position: absolute; right: 1.6rem; top: 1.6rem;">
                                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                                </svg>
                                            </a>
                                        {% else %}
                                            <a class="WishList_Source" href="{% url 'add_to_wishlist' ct_model=product.ct_model product_slug=product.slug %}" style="color: black;">
                                                <svg id="WishList" class="WishList{{product.id}}" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 18 18" style="position: absolute; right: 1.6rem; top: 1.6rem;">
                                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                                </svg>
                                            </a>
                                        {% endif %}
                                    {% endif %}
                                    <!--<a href="{% url 'add_to_wishlist' ct_model=product.ct_model product_slug=product.slug %}" id="WishList" class="WishList{{product.id}}" style="position: absolute; width: 100%; text-decoration: none; color: black">Добавить в Избранное</a>-->
                                    <img class="image_product" id="image_product_sidebar" src="{{product.photo.url}}">
                                </div>
                            </div>
                            <div class="info">
                                <div id="size_block" class="size_block{{product.id}}">
                                    {% if product.stock %}
                                        {% for size in product.size.all %}
                                            <div id="size_class" class="col-md" style="text-align: center;">
                                                <a id="link_size" href="{% url 'add-to-cart' ct_model=product.ct_model product_slug=product.slug product_size=size.slug %}">
                                                    <p style="height: 100%;">{{ size }}</p>
                                                </a>
                                            </div>
                                        {% endfor %}
                                    {% else %}
                                        <div class="col-md" style="text-align: center;">
                                            <a>
                                                Нету в наличии
                                            </a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h1>{{product.title}}</h1>
                            <p style="max-width: 100%;; text-align: center;">{{product.sex}} - {{product.category}}</p>
                            <p style="max-width: 100%;; text-align: center;">{{product.brand}} {{product.title}}</p>
                            <p style="max-width: 100%;">
                                <strong>
                                    {{product.sale_price}} руб.
                                </strong>
                                <a style="text-decoration: line-through;">
                                    {{product.price}} руб.
                                </a>
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    {% else %}
        <div id="info">
            <div class="infoblockempty">
                <p>Пока что здесь нету ни одногой вещи</p>
            </div>
        </div>
    {% endif %}
{% endblock %}